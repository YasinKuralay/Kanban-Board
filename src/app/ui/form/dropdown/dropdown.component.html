<div class="dropdown" [class.open]="isOpen">
  <div
    #dropdownHeader
    class="dropdown-header"
    (click)="toggleDropdown()"
    (keydown)="handleKeydownOnHeader($event)"
    role="combobox"
    tabindex="0"
  >
    {{
      selectedOptionIndex !== -1
        ? options[selectedOptionIndex]
        : "Select an option"
    }}
    <span class="arrow">â–¼</span>
  </div>

  @if (isOpen) {
    <ul
      #dropdownList
      class="dropdown-list"
      role="listbox"
      (focusout)="handleFocusOutOnList($event)"
      [attr.aria-labelledby]="dropdownHeader.id"
    >
      @for (option of options; track option; let idx = $index) {
        <li
          class="dropdown-list-item"
          (click)="selectOption(idx)"
          (keydown)="handleKeydownOnListItem($event, idx)"
          role="option"
          [attr.aria-selected]="selectedOptionIndex === idx"
          tabindex="0"
        >
          {{ option }}
        </li>
      }
    </ul>
  }
</div>
